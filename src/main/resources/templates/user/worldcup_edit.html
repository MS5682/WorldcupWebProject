<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.115.4">
    <title>이상형 월드컵 수정 및 선택지 추가</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/album/">

    

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">

<link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">

    <link th:href="@{/css/styles.css}" rel="stylesheet">

  </head>
  <body>


  <th:block th:include="main/header :: header"></th:block>

<main>

  <div class="album py-5 bg-body-tertiary">
    <div class="container">

      <div class="top">
        <div><h2>이상형 월드컵 수정 및 선택지 추가</h2></div>
      </div>

      <form th:action="@{/update}" th:object="${result}" method="post">
        <input type="hidden" th:field="*{worldcupNum}">
        <table class="register">
          <tr>
            <th class="register-th">제목</th>
            <td class="register-td">
              <input class="border-none-input" placeholder="제목을 입력하세요" th:value="*{title}">
            </td>
          </tr>
          <tr>
            <th class="register-th">설명</th>
            <td class="register-td">
              <input class="border-none-input" placeholder="설명을 입력하세요" th:value="*{description}">
            </td>
          </tr>
          <tr>
            <th class="register-th">공개 여부</th>
            <td class="register-td">
              <label style="margin-left:5px;">
                <input type="radio" name="disclosure" value="1" th:checked="${result.disclosure == 1}">공개
              </label>
              <label>
                <input type="radio" name="disclosure" value="0" th:checked="${result.disclosure == 0}">비공개
              </label>
            </td>
          </tr>
          <tr>
            <th class="register-th">수정하기</th>
            <td class="register-td">
              <button type="submit" class="btn btn-sm btn-outline-secondary">수정하기</button>
            </td>
          </tr>
        </table>
      </form>

      <table class="register-choice">

        <tr>
          <th class="register-choice-th">선택지</th>
          <td class="register-choice-td">
            
            
            <table class="choice">
              <tr>
                <th class="choice-th col-1">순서</th>
                <th class="choice-th col-2">선택지 이름</th>
                <th class="choice-th col-3">이미지 미리보기</th>
                <th class="choice-th col-4">이미지 or 영상링크</th>
                <th class="choice-th col-1">수정하기</th>
                <th class="choice-th col-1">삭제</th>
              </tr>


              <tr>
                <form>
                  <td class="choice-td">1</td>
                  <input type="hidden" name="choiceNum" value="값">
                  <input type="hidden" name="type" value="0">
                  <td class="choice-td">
                    <input name="name" value="이미지">
                  </td>
                  <td class="choice-td image-preview-td">
                    <svg class="bd-placeholder-img card-img-top" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false">
                      <title>Placeholder</title>
                      <rect width="100%" height="100%" fill="#55595c"/>
                      <text x="50%" y="50%" fill="#eceeef" dy=".3em">Thumbnail</text>
                    </svg>
                  </td>
                  <td class="choice-td"><input type="file" name="image" class="image-upload-field"></td>
                  <td class="choice-td"><button type="submit" class="btn btn-sm btn-outline-secondary">수정하기</button></td>
                </form>
                <form>
                  <input type="hidden" name="choiceNum" value="값">
                  <td class="choice-td"><button type="submit" class="btn btn-sm btn-outline-secondary">삭제하기</button></td>
                </form>
              </tr>
              <tr>
                <form>
                  <td class="choice-td">1</td>
                  <input type="hidden" name="choiceNum" value="값">
                  <input type="hidden" name="type" value="0">
                  <td class="choice-td">
                    <input name="name" value="이미지">
                  </td>
                  <td class="choice-td image-preview-td">
                    <svg class="bd-placeholder-img card-img-top" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false">
                      <title>Placeholder</title>
                      <rect width="100%" height="100%" fill="#55595c"/>
                      <text x="50%" y="50%" fill="#eceeef" dy=".3em">Thumbnail</text>
                    </svg>
                  </td>
                  <td class="choice-td">
                    <input type="file" name="image" class="image-upload-field">
                  </td>
                  <td class="choice-td"><button type="submit" class="btn btn-sm btn-outline-secondary">수정하기</button></td>
                </form>
                <form>
                  <input type="hidden" name="choiceNum" value="값">
                  <td class="choice-td"><button type="submit" class="btn btn-sm btn-outline-secondary">삭제하기</button></td>
                </form>
              </tr>
              <tr>
                <form>
                  <td class="choice-td">2</td>
                  <input type="hidden" name="choiceNum" value="값">
                  <input type="hidden" name="type" value="0">
                  <td class="choice-td">
                    <input name="name" value="영상">
                  </td>
                  <td class="choice-td">
                    
                  </td>
                  <td class="choice-td"><input type="text" name="link" class="link"></td>
                  <td class="choice-td"><button type="submit" class="btn btn-sm btn-outline-secondary">수정하기</button></td>
                </form>
                <form>
                  <input type="hidden" name="choiceNum" value="값">
                  <td class="choice-td"><button type="submit" class="btn btn-sm btn-outline-secondary">삭제하기</button></td>
                </form>
              </tr>
              


              <tr>
                <td colspan="6" class="add-button text-end">
                  <button type="button" class="btn btn-sm btn-outline-secondary" id="addVideoBtn">영상추가하기</button>
                  <button type="button" class="btn btn-sm btn-outline-secondary" id="addPhotoBtn">사진추가하기</button>
                </td>
              </tr>
            </table>

          </td>
        </tr>
        
      </table>
      <div class="text-end">
        <button type="button" class="btn btn-sm btn-outline-secondary ">돌아가기</button>
      </div>
    </div>
  </div>



<div class="modal fade" id="addImageModal" tabindex="-1" aria-labelledby="addImageModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addImageModalLabel">이미지 추가</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="imageForm">
          <label for="imageTitle" class="form-label">제목</label>
          <input type="text" class="form-control" id="imageTitle" required>
          
          <label for="imageFile" class="form-label">이미지 파일</label>
          <input type="file" class="form-control" id="imageFile" onchange="previewImage()" required>
          
          <div id="imagePreview" style="margin-top: 10px;"></div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
        <button type="button" class="btn btn-primary" onclick="submitImageForm()">추가하기</button>
      </div>
    </div>
  </div>
</div>




<div class="modal fade" id="addVideoModal" tabindex="-1" aria-labelledby="addVideoModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addVideoModalLabel">영상 추가</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="videoForm">
          <label for="videoTitle" class="form-label">제목</label>
          <input type="text" class="form-control" id="videoTitle" required>
          
          <label for="videoLink" class="form-label">영상 링크</label>
          <input type="text" class="form-control" id="videoLink" required>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
        <button type="button" class="btn btn-primary" onclick="submitVideoForm()">추가하기</button>
      </div>
    </div>
  </div>
</div>

</main>

  <th:block th:include="main/footer :: footer"></th:block>
<script>
  $("#addVideoBtn").click(function () {
    $('#addVideoModal').modal('show');
  });
  $("#addPhotoBtn").click(function () {
    $('#addImageModal').modal('show');
  });


  function submitImageForm() {
    var formData = new FormData(document.getElementById('imageForm'));

    // 여기서 AJAX 또는 fetch를 사용하여 서버에 POST 요청 보내기

    $('#addImageModal').modal('hide');

    location.reload();
  }

  function submitVideoForm() {
    var formData = new FormData(document.getElementById('videoForm'));

    // 여기서 AJAX 또는 fetch를 사용하여 서버에 POST 요청 보내기

    $('#addVideoModal').modal('hide');

    location.reload();
  }


  function previewImage() {
    var input = document.getElementById('imageFile');
    var preview = document.getElementById('imagePreview');
    
    while (preview.firstChild) {
      preview.removeChild(preview.firstChild);
    }

    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function (e) {
        var img = document.createElement('img');
        img.src = e.target.result;
        img.style.maxWidth = '100%';
        img.style.maxHeight = '150px';

        preview.appendChild(img);
      };

      reader.readAsDataURL(input.files[0]);
    }
  }
</script>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
  $(document).ready(function () {
    $('.image-upload-field').change(function () {
      
      var input = $(this);
      var previewTd = input.closest('tr').find('.image-preview-td');
      previewTd.empty();

      if (input[0].files && input[0].files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
          var img = $('<img>').attr('src', e.target.result);
          img.css({ 'max-width': '100%', 'max-height': '150px' });
          previewTd.append(img);
        };

        reader.readAsDataURL(input[0].files[0]);
      }
    });
  });
</script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    </body>
</html>
